local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local UIStroke = Instance.new("UIStroke")
local InfoLabel = Instance.new("TextLabel")
local ActionButton = Instance.new("TextButton")
local ButtonCorner = Instance.new("UICorner")
local Notification = Instance.new("TextLabel")

ScreenGui.Name = "QuestSystemUI"
ScreenGui.Parent = game:GetService("CoreGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.5, -125, 0.5, -60)
MainFrame.Size = UDim2.new(0, 250, 0, 120)
MainFrame.Active = true
MainFrame.Draggable = true

UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

UIStroke.Color = Color3.fromRGB(60, 60, 70)
UIStroke.Thickness = 2
UIStroke.Parent = MainFrame

InfoLabel.Name = "InfoLabel"
InfoLabel.Parent = MainFrame
InfoLabel.BackgroundTransparency = 1
InfoLabel.Position = UDim2.new(0, 0, 0, 10)
InfoLabel.Size = UDim2.new(1, 0, 0, 40)
InfoLabel.Font = Enum.Font.GothamBold
InfoLabel.Text = "QUEST UTILITY\nREADY"
InfoLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
InfoLabel.TextSize = 14

ActionButton.Name = "ActionButton"
ActionButton.Parent = MainFrame
ActionButton.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
ActionButton.Position = UDim2.new(0.1, 0, 0.55, 0)
ActionButton.Size = UDim2.new(0.8, 0, 0, 40)
ActionButton.Font = Enum.Font.GothamBold
ActionButton.Text = "START LOOP"
ActionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
ActionButton.TextSize = 14

ButtonCorner.CornerRadius = UDim.new(0, 6)
ButtonCorner.Parent = ActionButton

Notification.Name = "Notice"
Notification.Parent = ScreenGui
Notification.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Notification.BackgroundTransparency = 0.4
Notification.Position = UDim2.new(1, -310, 1, -60)
Notification.Size = UDim2.new(0, 300, 0, 45)
Notification.Font = Enum.Font.GothamMedium
Notification.Text = "Make your Graphics Quality 10"
Notification.TextColor3 = Color3.fromRGB(255, 255, 255)
Notification.TextSize = 12
Notification.TextWrapped = true
Instance.new("UICorner", Notification).CornerRadius = UDim.new(0, 6)

local function RunProcess()
    ActionButton.Active = false
    ActionButton.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
    InfoLabel.Text = "SYSTEMS ACTIVE"
    
    local remote = game:GetService("ReplicatedStorage").Remotes.QuestEvent
    local args = {
        [1] = "StartQuest",
        [2] = workspace.Quests.Pantheist
    }
    
    local running = true


    task.spawn(function()
        while running do
            for i = 1, 100 do
                remote:FireServer(unpack(args))
            end
            task.wait(0.01)
        end
    end)


    task.spawn(function()
        while running do
            for _, v in ipairs(game:GetDescendants()) do
                if v:IsA("ClickDetector") then
                    fireclickdetector(v)
                end
            end
            task.wait(1)
        end
    end)


    local connection = game.DescendantAdded:Connect(function(obj)
        if obj:IsA("ClickDetector") then
            fireclickdetector(obj)
        end
    end)


    task.spawn(function()
        for i = 20, 1, -1 do
            ActionButton.Text = "REJOINING IN: " .. i
            task.wait(1)
        end
        
        running = false
        connection:Disconnect()
        local ts = game:GetService("TeleportService")
        ts:Teleport(game.PlaceId, game.Players.LocalPlayer)
    end)
end

ActionButton.MouseButton1Click:Connect(RunProcess)
